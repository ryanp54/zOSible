---
  - hosts: zsystem
    gather_facts: no
    vars_files:
      - ./vars/last_args.yaml
    environment:
      "{{environment_vars}}"
        
    collections:
      - ibm.ibm_zos_core
    
    tasks:
      - name: Submit data set for execution
        zos_job_submit:
          src: "{{ data_set_name }}"
          location: DATA_SET
          wait: true
          return_output: true
        register: job_detail

      - name: Setting fact `Job Results`
        set_fact:
          job_results: "{{ job_detail.jobs[0]}}"

      - name: Results
        debug:  
          msg: "Job {{ job_results.job_id}} completed with {{ job_results.ret_code.msg}}"